<!DOCTYPE html>
<html>


<!--
!!    MOE On-Line Manuals
!!    COPYRIGHT (C) CHEMICAL COMPUTING GROUP ULC.  ALL RIGHTS RESERVED.
!!-->
<head>
  <meta http-equiv="x-ua-compatible" content="IE=9" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="../include/manstyle.css" />
  <title>Running Gaussian outside of MOE (example file)</title>
  <meta name="keywords" content=
  "main_keywords: Gaussian, QM, quantum, SCF, cluster" />
</head>
<body>
<div class="center-page">
  <!-- START MOE_HEADER -->
  <div class="MOE_HEADER">
    <a href="../index.htm"><img src="../images/ccglogo.png" /></a>
    <a href="../index.htm"><div class="moeversion"></div></a>
    Running Gaussian outside of MOE
  </div>
<!-- END MOE_HEADER -->
<div class="content">
<h1>Example shell script</h1>

<p>
The following script, <tt>sample_gaussian.sh</tt>,  is provided as an
guide to modifying existing,
site-specific scripts that run either Gaussian&nbsp;09 or Gaussian&nbsp;16.
Earlier versions might also work for simple features such as single-point
energies or optimization with suitable modifications.  
</p>

<pre class="code">
#!/bin/sh
#
# This is a sample shell script to run Gaussian on one or more
# input files.  It indicates the naming convention to use and
# how the Gaussian utilities formchk and freqchk are used to
# make information files needed for MOE to parse the Gaussian
# output.  It provides a guide to modify the local or cluster
# Gaussian execution script(s) to create the data needed to
# import the results into MOE.
#
# Calculation of spin-spin coupling constants requires a second
# calculation that will be run if the appropriate input file is
# present.  This reads the checkpoint generated by the first
# step as input.
#
# This script can be run in each subdirectory in the directory:
#
# cd xxx_qm_nnnn
# sh ../sample_gaussian.sh xxx_qm_nnnn
#
# where xxx_qm_nnnn is the prefix of all of the files for
# the Gaussian run (which can also be the directory name
# containing the input file).  This script assumes that the
# the local Gaussian execution environment is set up and that
# $g16root or $g09root is set up per Gaussian's manual.  In
# order for MOE to import the results into the Database Viewer,
# all files created by the various Gaussian calculations must
# reside in their original subdirectory.
#
# This script reads or creates a number of files with various
# file suffixes.  These must be preserved so that MOE can reimport
# the data.  The input and output file suffixes are set in the
# user's MOE environment when the Gaussian input files are created.
#
# Input file (MOE):                    xxx.inp
# Output file:                         xxx.out
# Checkpoint file:                     xxx.chk
# Formatted checkpoint file (formchk): xxx.fchk
# Frequency file (freqchk):            xxx.frq
#
# The program in parenthesis creates the specified file.
#
# This script can be sourced to create an environmental variable for
# each suffix mentioned above.  This can be used by other scripts
# that run the operations indicated below in their own fashion.  To
# source the file omit the prefix argument ($1)

Gau_inp_prefix=inp;  export Gau_inp_prefix
Gau_out_prefix=out;  export Gau_out_prefix
Gau_chk_prefix=chk;  export Gau_chk_prefix
Gau_fchk_prefix=fchk; export Gau_fchk_prefix
Gau_frq_prefix=frq;  export Gau_frq_prefix

if test -z "${1}"
then
    return 1
fi

if test -z "${g16root}"
then
    groot=${g09root}
    gver=g09
else
    groot=${g16root}
    gver=g16
fi
prefix=${1}

${groot}/$gver/$gver ${prefix}.inp ${prefix}.out

${groot}/$gver/formchk -3 ${prefix}.chk ${prefix}.fchk

# It is not necessary to generate a frq file for the coupling
# constant run.  We will run the coupling file if present.

if test -f ${prefix}_coupling.inp
then
cp ${prefix}.chk ${prefix}_coupling.chk
${groot}/$gver/$gver ${prefix}_coupling.inp ${prefix}_coupling.out

${groot}/$gver/formchk -3 ${prefix}_coupling.chk ${prefix}_coupling.fchk
fi
</pre>

<p>
This specifies the input (<tt>.inp</tt>), output (<tt>.out</tt>),
checkpoint (<tt>.chk</tt> and <tt>.fchk</tt>) and frequency (<tt>.frq</tt>)
file suffixes to use. It runs the initial calculation to perform the
optimization and a secondary calculation to calculate coupling constants. It
also runs the Gaussian utilities <tt>formchk</tt> and <tt>freqchk</tt> to
generate the additional output files needed for MOE to parse and
import the information.
</p>

<!-- START MOE_FOOTER -->
  <div class="MOE_FOOTER">
    <img src="../images/ccgicon.png" /> <a href="../index.htm"></a> <a href=
    "../legal.htm"></a> &copy;<span class="versionyear"></span> <a href="http://www.chemcomp.com"></a>. All
    rights reserved.
    <a href="mailto:info@chemcomp.com"></a>
  </div><!-- END MOE_FOOTER -->
</div>
</div>
</body>
</html>

